{"version":3,"file":"plugin.cjs.js","sources":["esm/plugin/models.js","esm/plugin/factory.js","esm/logger.js","esm/error.js","esm/socket.js"],"sourcesContent":["export var PluginEvents;\n(function (PluginEvents) {\n    PluginEvents[\"OnData\"] = \"OnData\";\n    PluginEvents[\"OnClose\"] = \"OnClose\";\n    PluginEvents[\"OnError\"] = \"OnError\";\n})(PluginEvents || (PluginEvents = {}));\n//# sourceMappingURL=models.js.map","import { registerPlugin } from '@capacitor/core';\nconst pluginName = 'CapacitorSocketConnectionPlugin';\nexport const createPlugin = (pluginName, options) => {\n    return registerPlugin(pluginName, { web: options === null || options === void 0 ? void 0 : options.web });\n};\nconst plugin = createPlugin(pluginName);\nexport { plugin as NativePlugin };\n//# sourceMappingURL=factory.js.map","import { LoggerFactory, LoggerObserver, } from '@spryrocks/logger-plugin';\nconst _loggerObserver = new LoggerObserver();\nconst loggerObserver = _loggerObserver;\nconst pluginName = 'SocketConnectionPlugin';\nconst prepareLogData = ({ data }) => (Object.assign(Object.assign({}, data), { plugin: pluginName, action: undefined }));\nconst factory = new LoggerFactory({\n    notifier: _loggerObserver,\n    prepareLogData,\n    globalData: undefined,\n});\nconst createLogger = (tag) => factory.createLogger(tag);\nexport { loggerObserver as LoggerObserver, createLogger };\n//# sourceMappingURL=logger.js.map","export class SocketConnectionError extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\n//# sourceMappingURL=error.js.map","import { NativePlugin, PluginEvents, } from './plugin/index';\nimport { createLogger } from './logger';\nimport { ErrorLevel } from '@spryrocks/logger-plugin';\nimport { SocketConnectionError } from './error';\nexport class Socket {\n    // eslint-disable-next-line @typescript-eslint/no-useless-constructor,@typescript-eslint/no-empty-function\n    constructor(_options) {\n        this.logger = createLogger();\n        this._state = 'initial';\n        this.setupListeners();\n    }\n    //region Actions\n    async open(host, port) {\n        this.logger.debug('Open connection', { host, port });\n        this.checkStateOrThrow('initial', `You can call \"open\" method only once`);\n        this.onOpeningInternal();\n        let close;\n        try {\n            const { link } = await this.wrapCall(NativePlugin.openConnection({ host, port }));\n            close = this.checkState('closing');\n            this.onOpenedInternal(link);\n        }\n        catch (error) {\n            this.onErrorInternal(error);\n            throw error;\n        }\n        if (close) {\n            this.closeInternal().catch();\n        }\n    }\n    async write(data) {\n        this.checkStateOrThrow('opened', `Not supported state: ${this.state}`);\n        return this.wrapCall(NativePlugin.sendData({ link: this.getLinkOrThrow(), data: Array.from(data) }));\n    }\n    async close() {\n        if (this.checkState('initial')) {\n            this.logger.debug('Connection closed from initial state');\n            this.onClosedInternal();\n            return;\n        }\n        if (this.checkState('opening')) {\n            this.logger.debug('Connection closing from opening state');\n            this.onClosingInternal();\n            return;\n        }\n        await this.closeInternal();\n    }\n    //endregion\n    //region Events\n    onDataEventReceived(event) {\n        if (!this.checkEventUuid(event))\n            return;\n        this.onDataInternal(event.data);\n    }\n    onCloseEventReceived(event) {\n        if (!this.checkEventUuid(event))\n            return;\n        this.logger.info('onClose event received', { event });\n        this.onClosedInternal();\n    }\n    onErrorEventReceived(event) {\n        if (!this.checkEventUuid(event))\n            return;\n        this.logger.info('onError event received', { event });\n        this.onErrorInternal(this.createErrorFromObject(event.error));\n    }\n    //endregion\n    //region State & Helpers\n    get state() {\n        return this._state;\n    }\n    set state(newState) {\n        const oldState = this._state;\n        this.logger.info(`Set state: \"${newState}\"`, { oldState });\n        this._state = newState;\n    }\n    getLink() {\n        return this._link;\n    }\n    getLinkOrThrow() {\n        if (!this._link)\n            throw new SocketConnectionError('PluginLink is undefined');\n        return this._link;\n    }\n    setLink(link) {\n        this._link = link;\n        this.logger.updateParams({ link: link.uuid });\n    }\n    checkState(...states) {\n        return states.includes(this.state);\n    }\n    checkEventUuid(event) {\n        var _a;\n        return event.socketUuid === ((_a = this.getLink()) === null || _a === void 0 ? void 0 : _a.uuid);\n    }\n    checkStateOrThrow(state, errorMessage) {\n        if (!this.checkState(state)) {\n            this.logger.error(undefined, errorMessage, { level: ErrorLevel.Low });\n            throw new SocketConnectionError(errorMessage);\n        }\n    }\n    //endregion\n    //region Internal\n    onOpeningInternal() {\n        this.state = 'opening';\n    }\n    onOpenedInternal(link) {\n        this.setLink(link);\n        this.state = 'opened';\n        this.logger.info('Connection opened');\n    }\n    onDataInternal(bytes) {\n        if (!this.checkState('opened'))\n            return;\n        const data = new Uint8Array(bytes);\n        if (this.onData)\n            this.onData(data);\n    }\n    onErrorInternal(error) {\n        if (this.checkState('error'))\n            return;\n        if (this.checkState('closed'))\n            return;\n        if (this.checkState('closing')) {\n            this.onClosedInternal();\n            return;\n        }\n        this.logger.error(error, undefined, { level: ErrorLevel.Medium });\n        this.state = 'error';\n        if (this.onError)\n            this.onError(error);\n    }\n    onClosingInternal() {\n        this.state = 'closing';\n    }\n    onClosedInternal() {\n        if (this.checkState('closed'))\n            return;\n        if (this.checkState('error'))\n            return;\n        this.state = 'closed';\n        if (this.onClose)\n            this.onClose();\n    }\n    async closeInternal() {\n        if (this.checkState('opened')) {\n            this.logger.debug('Close connection');\n            this.onClosingInternal();\n            await this.wrapCall(NativePlugin.closeConnection({ link: this.getLinkOrThrow() }));\n            this.onClosedInternal();\n            this.logger.info('Connection closed');\n            return;\n        }\n        this.logger.info(`Cannot close connection from state \"${this.state}\"`);\n    }\n    setupListeners() {\n        NativePlugin.addListener(PluginEvents.OnData, (data) => {\n            this.onDataEventReceived(data);\n        });\n        NativePlugin.addListener(PluginEvents.OnClose, (data) => {\n            this.onCloseEventReceived(data);\n        });\n        NativePlugin.addListener(PluginEvents.OnError, (data) => {\n            this.onErrorEventReceived(data);\n        });\n    }\n    //endregion\n    createErrorFromObject(error) {\n        return new SocketConnectionError(error.message);\n    }\n    processErrorCode(code) {\n        try {\n            const errorObject = JSON.parse(code);\n            return this.createErrorFromObject(errorObject);\n        }\n        catch (_a) {\n            return undefined;\n        }\n    }\n    processError(error) {\n        var _a;\n        if (error.code) {\n            const processedError = this.processErrorCode(error.code);\n            if (processedError)\n                return processedError;\n        }\n        return new SocketConnectionError((_a = error.errorMessage) !== null && _a !== void 0 ? _a : 'Unknown error');\n    }\n    wrapCall(promise) {\n        return promise.catch((error) => {\n            throw this.processError(error);\n        });\n    }\n}\n//# sourceMappingURL=socket.js.map"],"names":["pluginName","registerPlugin","LoggerObserver","LoggerFactory","NativePlugin","ErrorLevel"],"mappings":"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"}